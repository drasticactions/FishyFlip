// <auto-generated />
// This file was generated by FFSourceGen.
// Do not modify this file.

#nullable enable annotations
#nullable disable warnings

namespace FishyFlip.Lexicon.Com.Atproto.Identity
{

    /// <summary>
    /// com.atproto.identity Endpoint Group.
    /// </summary>
    public static class IdentityEndpoints
    {

       public const string GroupNamespace = "com.atproto.identity";

       public const string GetRecommendedDidCredentials = "/xrpc/com.atproto.identity.getRecommendedDidCredentials";

       public const string RefreshIdentity = "/xrpc/com.atproto.identity.refreshIdentity";

       public const string RequestPlcOperationSignature = "/xrpc/com.atproto.identity.requestPlcOperationSignature";

       public const string ResolveDid = "/xrpc/com.atproto.identity.resolveDid";

       public const string ResolveHandle = "/xrpc/com.atproto.identity.resolveHandle";

       public const string ResolveIdentity = "/xrpc/com.atproto.identity.resolveIdentity";

       public const string SignPlcOperation = "/xrpc/com.atproto.identity.signPlcOperation";

       public const string SubmitPlcOperation = "/xrpc/com.atproto.identity.submitPlcOperation";

       public const string UpdateHandle = "/xrpc/com.atproto.identity.updateHandle";


        /// <summary>
        /// Describe the credentials that should be included in the DID doc of an account that is migrating to this service.
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.Com.Atproto.Identity.GetRecommendedDidCredentialsOutput?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.Com.Atproto.Identity.GetRecommendedDidCredentialsOutput?>> GetRecommendedDidCredentialsAsync (this FishyFlip.ATProtocol atp, CancellationToken cancellationToken = default)
        {
            var endpointUrl = GetRecommendedDidCredentials.ToString();
            var headers = new Dictionary<string, string>();
            if (atp.TryFetchProxy(GroupNamespace, out var proxyUrl))
            {
                headers.Add(Constants.AtProtoProxy, proxyUrl);
            }
            headers.Add(Constants.AtProtoAcceptLabelers, atp.Options.LabelDefinitionsHeader);
            return atp.Get<FishyFlip.Lexicon.Com.Atproto.Identity.GetRecommendedDidCredentialsOutput>(endpointUrl, atp.Options.SourceGenerationContext.ComAtprotoIdentityGetRecommendedDidCredentialsOutput!, cancellationToken, headers);
        }


        /// <summary>
        /// Request that the server re-resolve an identity (DID and handle). The server may ignore this request, or require authentication, depending on the role, implementation, and policy of the server.
        /// <br/> Possible Errors: <br/>
        /// <see cref="FishyFlip.Lexicon.HandleNotFoundError"/> The resolution process confirmed that the handle does not resolve to any DID. <br/>
        /// <see cref="FishyFlip.Lexicon.DidNotFoundError"/> The DID resolution process confirmed that there is no current DID. <br/>
        /// <see cref="FishyFlip.Lexicon.DidDeactivatedError"/> The DID previously existed, but has been deactivated. <br/>
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="identifier"></param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.Com.Atproto.Identity.IdentityInfo?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.Com.Atproto.Identity.IdentityInfo?>> RefreshIdentityAsync (this FishyFlip.ATProtocol atp, FishyFlip.Models.ATIdentifier identifier, CancellationToken cancellationToken = default)
        {
            var endpointUrl = RefreshIdentity.ToString();
            var headers = new Dictionary<string, string>();
            var inputItem = new RefreshIdentityInput();
            inputItem.Identifier = identifier;
            return atp.Post<RefreshIdentityInput, FishyFlip.Lexicon.Com.Atproto.Identity.IdentityInfo?>(endpointUrl, atp.Options.SourceGenerationContext.ComAtprotoIdentityRefreshIdentityInput!, atp.Options.SourceGenerationContext.ComAtprotoIdentityIdentityInfo!, inputItem, cancellationToken, headers);
        }


        /// <summary>
        /// Request an email with a code to in order to request a signed PLC operation. Requires Auth.
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="Success?"/></returns>
        public static Task<Result<Success?>> RequestPlcOperationSignatureAsync (this FishyFlip.ATProtocol atp, CancellationToken cancellationToken = default)
        {
            var endpointUrl = RequestPlcOperationSignature.ToString();
            var headers = new Dictionary<string, string>();
            return atp.Post<Success?>(endpointUrl, atp.Options.SourceGenerationContext.Success!, cancellationToken, headers);
        }


        /// <summary>
        /// Resolves DID to DID document. Does not bi-directionally verify handle.
        /// <br/> Possible Errors: <br/>
        /// <see cref="FishyFlip.Lexicon.DidNotFoundError"/> The DID resolution process confirmed that there is no current DID. <br/>
        /// <see cref="FishyFlip.Lexicon.DidDeactivatedError"/> The DID previously existed, but has been deactivated. <br/>
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="did">DID to resolve.</param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.Com.Atproto.Identity.ResolveDidOutput?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.Com.Atproto.Identity.ResolveDidOutput?>> ResolveDidAsync (this FishyFlip.ATProtocol atp, FishyFlip.Models.ATDid did, CancellationToken cancellationToken = default)
        {
            var endpointUrl = ResolveDid.ToString();
            endpointUrl += "?";
            List<string> queryStrings = new();
            queryStrings.Add("did=" + did);

            var headers = new Dictionary<string, string>();
            if (atp.TryFetchProxy(GroupNamespace, out var proxyUrl))
            {
                headers.Add(Constants.AtProtoProxy, proxyUrl);
            }
            headers.Add(Constants.AtProtoAcceptLabelers, atp.Options.LabelDefinitionsHeader);
            endpointUrl += string.Join("&", queryStrings);
            return atp.Get<FishyFlip.Lexicon.Com.Atproto.Identity.ResolveDidOutput>(endpointUrl, atp.Options.SourceGenerationContext.ComAtprotoIdentityResolveDidOutput!, cancellationToken, headers);
        }


        /// <summary>
        /// Resolves an atproto handle (hostname) to a DID. Does not necessarily bi-directionally verify against the the DID document.
        /// <br/> Possible Errors: <br/>
        /// <see cref="FishyFlip.Lexicon.HandleNotFoundError"/> The resolution process confirmed that the handle does not resolve to any DID. <br/>
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="handle">The handle to resolve.</param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.Com.Atproto.Identity.ResolveHandleOutput?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.Com.Atproto.Identity.ResolveHandleOutput?>> ResolveHandleAsync (this FishyFlip.ATProtocol atp, FishyFlip.Models.ATHandle handle, CancellationToken cancellationToken = default)
        {
            var endpointUrl = ResolveHandle.ToString();
            endpointUrl += "?";
            List<string> queryStrings = new();
            queryStrings.Add("handle=" + handle);

            var headers = new Dictionary<string, string>();
            if (atp.TryFetchProxy(GroupNamespace, out var proxyUrl))
            {
                headers.Add(Constants.AtProtoProxy, proxyUrl);
            }
            headers.Add(Constants.AtProtoAcceptLabelers, atp.Options.LabelDefinitionsHeader);
            endpointUrl += string.Join("&", queryStrings);
            return atp.Get<FishyFlip.Lexicon.Com.Atproto.Identity.ResolveHandleOutput>(endpointUrl, atp.Options.SourceGenerationContext.ComAtprotoIdentityResolveHandleOutput!, cancellationToken, headers);
        }


        /// <summary>
        /// Resolves an identity (DID or Handle) to a full identity (DID document and verified handle).
        /// <br/> Possible Errors: <br/>
        /// <see cref="FishyFlip.Lexicon.HandleNotFoundError"/> The resolution process confirmed that the handle does not resolve to any DID. <br/>
        /// <see cref="FishyFlip.Lexicon.DidNotFoundError"/> The DID resolution process confirmed that there is no current DID. <br/>
        /// <see cref="FishyFlip.Lexicon.DidDeactivatedError"/> The DID previously existed, but has been deactivated. <br/>
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="identifier">Handle or DID to resolve.</param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.Com.Atproto.Identity.IdentityInfo?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.Com.Atproto.Identity.IdentityInfo?>> ResolveIdentityAsync (this FishyFlip.ATProtocol atp, FishyFlip.Models.ATIdentifier identifier, CancellationToken cancellationToken = default)
        {
            var endpointUrl = ResolveIdentity.ToString();
            endpointUrl += "?";
            List<string> queryStrings = new();
            queryStrings.Add("identifier=" + identifier);

            var headers = new Dictionary<string, string>();
            if (atp.TryFetchProxy(GroupNamespace, out var proxyUrl))
            {
                headers.Add(Constants.AtProtoProxy, proxyUrl);
            }
            headers.Add(Constants.AtProtoAcceptLabelers, atp.Options.LabelDefinitionsHeader);
            endpointUrl += string.Join("&", queryStrings);
            return atp.Get<FishyFlip.Lexicon.Com.Atproto.Identity.IdentityInfo>(endpointUrl, atp.Options.SourceGenerationContext.ComAtprotoIdentityIdentityInfo!, cancellationToken, headers);
        }


        /// <summary>
        /// Signs a PLC operation to update some value(s) in the requesting DID's document.
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="token">A token received through com.atproto.identity.requestPlcOperationSignature</param>
        /// <param name="rotationKeys"></param>
        /// <param name="alsoKnownAs"></param>
        /// <param name="verificationMethods"></param>
        /// <param name="services"></param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.Com.Atproto.Identity.SignPlcOperationOutput?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.Com.Atproto.Identity.SignPlcOperationOutput?>> SignPlcOperationAsync (this FishyFlip.ATProtocol atp, string? token = default, List<string>? rotationKeys = default, List<string>? alsoKnownAs = default, ATObject? verificationMethods = default, ATObject? services = default, CancellationToken cancellationToken = default)
        {
            var endpointUrl = SignPlcOperation.ToString();
            var headers = new Dictionary<string, string>();
            var inputItem = new SignPlcOperationInput();
            inputItem.Token = token;
            inputItem.RotationKeys = rotationKeys;
            inputItem.AlsoKnownAs = alsoKnownAs;
            inputItem.VerificationMethods = verificationMethods;
            inputItem.Services = services;
            return atp.Post<SignPlcOperationInput, FishyFlip.Lexicon.Com.Atproto.Identity.SignPlcOperationOutput?>(endpointUrl, atp.Options.SourceGenerationContext.ComAtprotoIdentitySignPlcOperationInput!, atp.Options.SourceGenerationContext.ComAtprotoIdentitySignPlcOperationOutput!, inputItem, cancellationToken, headers);
        }


        /// <summary>
        /// Validates a PLC operation to ensure that it doesn't violate a service's constraints or get the identity into a bad state, then submits it to the PLC registry
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="operation"></param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="Success?"/></returns>
        public static Task<Result<Success?>> SubmitPlcOperationAsync (this FishyFlip.ATProtocol atp, ATObject operation, CancellationToken cancellationToken = default)
        {
            var endpointUrl = SubmitPlcOperation.ToString();
            var headers = new Dictionary<string, string>();
            var inputItem = new SubmitPlcOperationInput();
            inputItem.Operation = operation;
            return atp.Post<SubmitPlcOperationInput, Success?>(endpointUrl, atp.Options.SourceGenerationContext.ComAtprotoIdentitySubmitPlcOperationInput!, atp.Options.SourceGenerationContext.Success!, inputItem, cancellationToken, headers);
        }


        /// <summary>
        /// Updates the current account's handle. Verifies handle validity, and updates did:plc document if necessary. Implemented by PDS, and requires auth.
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="handle">The new handle.</param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="Success?"/></returns>
        public static Task<Result<Success?>> UpdateHandleAsync (this FishyFlip.ATProtocol atp, FishyFlip.Models.ATHandle handle, CancellationToken cancellationToken = default)
        {
            var endpointUrl = UpdateHandle.ToString();
            var headers = new Dictionary<string, string>();
            var inputItem = new UpdateHandleInput();
            inputItem.Handle = handle;
            return atp.Post<UpdateHandleInput, Success?>(endpointUrl, atp.Options.SourceGenerationContext.ComAtprotoIdentityUpdateHandleInput!, atp.Options.SourceGenerationContext.Success!, inputItem, cancellationToken, headers);
        }

    }
}

