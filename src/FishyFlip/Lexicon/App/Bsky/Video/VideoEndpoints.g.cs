// <auto-generated />
// This file was generated by FFSourceGen.
// Do not modify this file.

#nullable enable annotations
#nullable disable warnings

namespace FishyFlip.Lexicon.App.Bsky.Video
{

    /// <summary>
    /// app.bsky.video Endpoint Group.
    /// </summary>
    public static class VideoEndpoints
    {

       public const string GroupNamespace = "app.bsky.video";

       public const string GetJobStatus = "/xrpc/app.bsky.video.getJobStatus";

       public const string GetUploadLimits = "/xrpc/app.bsky.video.getUploadLimits";

       public const string UploadVideo = "/xrpc/app.bsky.video.uploadVideo";


        /// <summary>
        /// Get status details for a video processing job.
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="jobId"></param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.App.Bsky.Video.GetJobStatusOutput?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.App.Bsky.Video.GetJobStatusOutput?>> GetJobStatusAsync (this FishyFlip.IXrpcClient atp, string jobId, CancellationToken cancellationToken = default)
        {
            var endpointUrl = GetJobStatus.ToString();
            endpointUrl += "?";
            List<string> queryStrings = new();
            queryStrings.Add("jobId=" + jobId);

            var headers = new Dictionary<string, string>();
            headers.Add(Constants.AtProtoAcceptLabelers, string.Join(", ", atp.LabelParameters.Select(p => p.ToString())));
            endpointUrl += string.Join("&", queryStrings);
            return atp.QueryAsync<FishyFlip.Lexicon.App.Bsky.Video.GetJobStatusOutput>(endpointUrl, SourceGenerationContext.Default.AppBskyVideoGetJobStatusOutput!, cancellationToken, headers);
        }


        /// <summary>
        /// Get video upload limits for the authenticated user.
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.App.Bsky.Video.GetUploadLimitsOutput?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.App.Bsky.Video.GetUploadLimitsOutput?>> GetUploadLimitsAsync (this FishyFlip.IXrpcClient atp, CancellationToken cancellationToken = default)
        {
            var endpointUrl = GetUploadLimits.ToString();
            var headers = new Dictionary<string, string>();
            headers.Add(Constants.AtProtoAcceptLabelers, string.Join(", ", atp.LabelParameters.Select(p => p.ToString())));
            return atp.QueryAsync<FishyFlip.Lexicon.App.Bsky.Video.GetUploadLimitsOutput>(endpointUrl, SourceGenerationContext.Default.AppBskyVideoGetUploadLimitsOutput!, cancellationToken, headers);
        }


        /// <summary>
        /// Upload a video to be processed then stored on the PDS.
        /// </summary>
        /// <param name="atp"></param>
        /// <param name="content"></param>
        /// <param name="cancellationToken"></param>
        /// <returns>Result of <see cref="FishyFlip.Lexicon.App.Bsky.Video.UploadVideoOutput?"/></returns>
        public static Task<Result<FishyFlip.Lexicon.App.Bsky.Video.UploadVideoOutput?>> UploadVideoAsync (this FishyFlip.IXrpcClient atp, StreamContent content, CancellationToken cancellationToken = default)
        {
            var endpointUrl = UploadVideo.ToString();
            var headers = new Dictionary<string, string>();
            return atp.ProcedureAsync<FishyFlip.Lexicon.App.Bsky.Video.UploadVideoOutput?>(endpointUrl, SourceGenerationContext.Default.AppBskyVideoUploadVideoOutput!, content, cancellationToken, headers);
        }

    }
}

