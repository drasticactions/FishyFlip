// <auto-generated />
// This file was generated by FFSourceGen.
// Do not modify this file.

#nullable enable annotations
#nullable disable warnings

namespace FishyFlip.Lexicon.Tools.Ozone.Moderation
{
    /// <summary>
    /// View of a scheduled moderation action
    /// </summary>
    public partial class ScheduledActionView : ATObject, ICBOREncodable<ScheduledActionView>, IJsonEncodable<ScheduledActionView>, IParsable<ScheduledActionView>
    {

        /// <summary>
        /// Initializes a new instance of the <see cref="ScheduledActionView"/> class.
        /// </summary>
        /// <param name="id">Auto-incrementing row ID</param>
        /// <param name="action">Type of action to be executed
        /// <br/> Known Values: <br/>
        /// takedown <br/>
        /// </param>
        /// <param name="eventData">Serialized event object that will be propagated to the event when performed</param>
        /// <param name="did">Subject DID for the action</param>
        /// <param name="executeAt">Exact time to execute the action</param>
        /// <param name="executeAfter">Earliest time to execute the action (for randomized scheduling)</param>
        /// <param name="executeUntil">Latest time to execute the action (for randomized scheduling)</param>
        /// <param name="randomizeExecution">Whether execution time should be randomized within the specified range</param>
        /// <param name="createdBy">DID of the user who created this scheduled action</param>
        /// <param name="createdAt">When the scheduled action was created</param>
        /// <param name="updatedAt">When the scheduled action was last updated</param>
        /// <param name="status">Current status of the scheduled action
        /// <br/> Known Values: <br/>
        /// pending <br/>
        /// executed <br/>
        /// cancelled <br/>
        /// failed <br/>
        /// </param>
        /// <param name="lastExecutedAt">When the action was last attempted to be executed</param>
        /// <param name="lastFailureReason">Reason for the last execution failure</param>
        /// <param name="executionEventId">ID of the moderation event created when action was successfully executed</param>
        public ScheduledActionView(long id = default, string action = default, ATObject? eventData = default, FishyFlip.Models.ATDid did = default, DateTime? executeAt = default, DateTime? executeAfter = default, DateTime? executeUntil = default, bool? randomizeExecution = default, FishyFlip.Models.ATDid createdBy = default, DateTime? createdAt = default, DateTime? updatedAt = default, string status = default, DateTime? lastExecutedAt = default, string? lastFailureReason = default, long? executionEventId = default)
        {
            this.Id = id;
            this.Action = action;
            this.EventData = eventData;
            this.Did = did;
            this.ExecuteAt = executeAt;
            this.ExecuteAfter = executeAfter;
            this.ExecuteUntil = executeUntil;
            this.RandomizeExecution = randomizeExecution;
            this.CreatedBy = createdBy;
            this.CreatedAt = createdAt ?? DateTime.UtcNow;
            this.UpdatedAt = updatedAt;
            this.Status = status;
            this.LastExecutedAt = lastExecutedAt;
            this.LastFailureReason = lastFailureReason;
            this.ExecutionEventId = executionEventId;
            this.Type = "tools.ozone.moderation.defs#scheduledActionView";
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="ScheduledActionView"/> class.
        /// </summary>
        public ScheduledActionView()
        {
            this.Type = "tools.ozone.moderation.defs#scheduledActionView";
        }


        /// <summary>
        /// Initializes a new instance of the <see cref="ScheduledActionView"/> class.
        /// </summary>
        public ScheduledActionView(CBORObject obj)
        {
            if (obj["id"] is not null) this.Id = obj["id"].AsInt64Value();
            if (obj["action"] is not null) this.Action = obj["action"].AsString();
            if (obj["eventData"] is not null) this.EventData = obj["eventData"].ToATObject();
            if (obj["did"] is not null) this.Did = obj["did"].ToATDid();
            if (obj["executeAt"] is not null) this.ExecuteAt = obj["executeAt"].ToDateTime();
            if (obj["executeAfter"] is not null) this.ExecuteAfter = obj["executeAfter"].ToDateTime();
            if (obj["executeUntil"] is not null) this.ExecuteUntil = obj["executeUntil"].ToDateTime();
            if (obj["randomizeExecution"] is not null) this.RandomizeExecution = obj["randomizeExecution"].AsBoolean();
            if (obj["createdBy"] is not null) this.CreatedBy = obj["createdBy"].ToATDid();
            if (obj["createdAt"] is not null) this.CreatedAt = obj["createdAt"].ToDateTime();
            if (obj["updatedAt"] is not null) this.UpdatedAt = obj["updatedAt"].ToDateTime();
            if (obj["status"] is not null) this.Status = obj["status"].AsString();
            if (obj["lastExecutedAt"] is not null) this.LastExecutedAt = obj["lastExecutedAt"].ToDateTime();
            if (obj["lastFailureReason"] is not null) this.LastFailureReason = obj["lastFailureReason"].AsString();
            if (obj["executionEventId"] is not null) this.ExecutionEventId = obj["executionEventId"].AsInt64Value();
            if (obj["$type"] is not null) this.Type = obj["$type"].AsString();
        }

        /// <summary>
        /// Gets or sets the id.
        /// <br/> Auto-incrementing row ID
        /// </summary>
        [JsonPropertyName("id")]
        [JsonRequired]
        public long Id { get; set; }

        /// <summary>
        /// Gets or sets the action.
        /// <br/> Type of action to be executed
        /// <br/> Known Values: <br/>
        /// takedown <br/>
        /// </summary>
        [JsonPropertyName("action")]
        [JsonRequired]
        public string Action { get; set; }

        /// <summary>
        /// Gets or sets the eventData.
        /// <br/> Serialized event object that will be propagated to the event when performed
        /// </summary>
        [JsonPropertyName("eventData")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public ATObject? EventData { get; set; }

        /// <summary>
        /// Gets or sets the did.
        /// <br/> Subject DID for the action
        /// </summary>
        [JsonPropertyName("did")]
        [JsonRequired]
        [JsonConverter(typeof(FishyFlip.Tools.Json.ATDidJsonConverter))]
        public FishyFlip.Models.ATDid Did { get; set; }

        /// <summary>
        /// Gets or sets the executeAt.
        /// <br/> Exact time to execute the action
        /// </summary>
        [JsonPropertyName("executeAt")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public DateTime? ExecuteAt { get; set; }

        /// <summary>
        /// Gets or sets the executeAfter.
        /// <br/> Earliest time to execute the action (for randomized scheduling)
        /// </summary>
        [JsonPropertyName("executeAfter")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public DateTime? ExecuteAfter { get; set; }

        /// <summary>
        /// Gets or sets the executeUntil.
        /// <br/> Latest time to execute the action (for randomized scheduling)
        /// </summary>
        [JsonPropertyName("executeUntil")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public DateTime? ExecuteUntil { get; set; }

        /// <summary>
        /// Gets or sets the randomizeExecution.
        /// <br/> Whether execution time should be randomized within the specified range
        /// </summary>
        [JsonPropertyName("randomizeExecution")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public bool? RandomizeExecution { get; set; }

        /// <summary>
        /// Gets or sets the createdBy.
        /// <br/> DID of the user who created this scheduled action
        /// </summary>
        [JsonPropertyName("createdBy")]
        [JsonRequired]
        [JsonConverter(typeof(FishyFlip.Tools.Json.ATDidJsonConverter))]
        public FishyFlip.Models.ATDid CreatedBy { get; set; }

        /// <summary>
        /// Gets or sets the createdAt.
        /// <br/> When the scheduled action was created
        /// </summary>
        [JsonPropertyName("createdAt")]
        [JsonRequired]
        public DateTime? CreatedAt { get; set; } = DateTime.UtcNow;

        /// <summary>
        /// Gets or sets the updatedAt.
        /// <br/> When the scheduled action was last updated
        /// </summary>
        [JsonPropertyName("updatedAt")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public DateTime? UpdatedAt { get; set; }

        /// <summary>
        /// Gets or sets the status.
        /// <br/> Current status of the scheduled action
        /// <br/> Known Values: <br/>
        /// pending <br/>
        /// executed <br/>
        /// cancelled <br/>
        /// failed <br/>
        /// </summary>
        [JsonPropertyName("status")]
        [JsonRequired]
        public string Status { get; set; }

        /// <summary>
        /// Gets or sets the lastExecutedAt.
        /// <br/> When the action was last attempted to be executed
        /// </summary>
        [JsonPropertyName("lastExecutedAt")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public DateTime? LastExecutedAt { get; set; }

        /// <summary>
        /// Gets or sets the lastFailureReason.
        /// <br/> Reason for the last execution failure
        /// </summary>
        [JsonPropertyName("lastFailureReason")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public string? LastFailureReason { get; set; }

        /// <summary>
        /// Gets or sets the executionEventId.
        /// <br/> ID of the moderation event created when action was successfully executed
        /// </summary>
        [JsonPropertyName("executionEventId")]
        [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
        public long? ExecutionEventId { get; set; }

        public const string RecordType = "tools.ozone.moderation.defs#scheduledActionView";

        public override string ToJson()
        {
            return JsonSerializer.Serialize(this, (JsonTypeInfo<FishyFlip.Lexicon.Tools.Ozone.Moderation.ScheduledActionView>)SourceGenerationContext.Default.ToolsOzoneModerationScheduledActionView);
        }

        public override byte[] ToUtf8Json()
        {
            return JsonSerializer.SerializeToUtf8Bytes(this, (JsonTypeInfo<FishyFlip.Lexicon.Tools.Ozone.Moderation.ScheduledActionView>)SourceGenerationContext.Default.ToolsOzoneModerationScheduledActionView);
        }

        public static new ScheduledActionView FromJson(string json)
        {
            return JsonSerializer.Deserialize<FishyFlip.Lexicon.Tools.Ozone.Moderation.ScheduledActionView>(json, (JsonTypeInfo<FishyFlip.Lexicon.Tools.Ozone.Moderation.ScheduledActionView>)SourceGenerationContext.Default.ToolsOzoneModerationScheduledActionView)!;
        }

        /// <inheritdoc/>
        public override CBORObject ToCBORObject()
        {
            using var jsonStream = new MemoryStream(Encoding.UTF8.GetBytes(this.ToJson()));
            return CBORObject.ReadJSON(jsonStream);
        }

        /// <inheritdoc/>
        public static new ScheduledActionView FromCBORObject(CBORObject obj)
        {
            return new ScheduledActionView(obj);
        }

        /// <inheritdoc/>
        public static ScheduledActionView Parse(string s, IFormatProvider? provider)
        {
            return JsonSerializer.Deserialize<ScheduledActionView>(s, (JsonTypeInfo<ScheduledActionView>)SourceGenerationContext.Default.ToolsOzoneModerationScheduledActionView)!;
        }

        /// <inheritdoc/>
        public static bool TryParse(string? s, IFormatProvider? provider, out ScheduledActionView result)
        {
            result = JsonSerializer.Deserialize<ScheduledActionView>(s, (JsonTypeInfo<ScheduledActionView>)SourceGenerationContext.Default.ToolsOzoneModerationScheduledActionView);
            return result != null;
        }
    }
}

