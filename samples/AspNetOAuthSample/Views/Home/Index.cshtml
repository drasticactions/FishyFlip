@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center hero-section">
    <h1 class="display-4 fw-bold">
        <img src="https://bsky.social/static/logo-small.png" width="48" height="48" alt="Bluesky" class="me-3">
        FishyFlip OAuth Sample
    </h1>
    <p class="lead">Experience seamless Bluesky authentication using OAuth 2.0 with FishyFlip.AspNetCore</p>
</div>

<div class="row mt-5">
    <div class="col-lg-4 mb-4">
        <div class="card h-100 border-primary">
            <div class="card-body text-center">
                <div class="feature-icon bg-primary text-white rounded-circle mx-auto mb-3">
                    <i class="bi bi-shield-lock"></i>
                </div>
                <h5 class="card-title">Secure OAuth 2.0</h5>
                <p class="card-text">
                    Industry-standard OAuth 2.0 flow with PKCE for enhanced security. 
                    No passwords stored on your server.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 mb-4">
        <div class="card h-100 border-success">
            <div class="card-body text-center">
                <div class="feature-icon bg-success text-white rounded-circle mx-auto mb-3">
                    <i class="bi bi-people"></i>
                </div>
                <h5 class="card-title">Multi-Tenant Ready</h5>
                <p class="card-text">
                    Support multiple users with isolated sessions and 
                    automatic token refresh for long-lived applications.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 mb-4">
        <div class="card h-100 border-info">
            <div class="card-body text-center">
                <div class="feature-icon bg-info text-white rounded-circle mx-auto mb-3">
                    <i class="bi bi-cloud"></i>
                </div>
                <h5 class="card-title">AT Protocol</h5>
                <p class="card-text">
                    Built on the decentralized AT Protocol, giving users 
                    control over their data and social experience.
                </p>
            </div>
        </div>
    </div>
</div>

@if (User.Identity?.IsAuthenticated != true)
{
    <div class="row mt-5">
        <div class="col-12">
            <div class="card bg-light border-0">
                <div class="card-body text-center py-5">
                    <div class="mb-4">
                        <img src="https://bsky.social/static/logo-small.png" width="64" height="64" alt="Bluesky" class="mb-3">
                        <h3>Ready to get started?</h3>
                        <p class="lead text-muted">
                            Connect your Bluesky account to see your profile and timeline
                        </p>
                    </div>
                    
                    <div class="d-flex flex-column flex-sm-row justify-content-center gap-3">
                        <a asp-controller="Account" asp-action="Login" class="btn btn-primary btn-lg">
                            <i class="bi bi-box-arrow-in-right me-2"></i>
                            Sign In with Bluesky
                        </a>
                        <a href="https://bsky.app" target="_blank" class="btn btn-outline-secondary btn-lg">
                            <i class="bi bi-plus-circle me-2"></i>
                            Create Bluesky Account
                        </a>
                    </div>
                    
                    <div class="mt-4">
                        <small class="text-muted">
                            <i class="bi bi-shield-check me-1"></i>
                            Secure OAuth 2.0 authentication - no passwords stored
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-success">
                <div class="card-body text-center py-4">
                    <div class="d-flex align-items-center justify-content-center mb-3">
                        <i class="bi bi-check-circle-fill text-success me-2" style="font-size: 1.5rem;"></i>
                        <h4 class="mb-0">Welcome back, @(User.FindFirst("bluesky_handle")?.Value)!</h4>
                    </div>
                    <p class="text-muted mb-4">You're successfully authenticated with your Bluesky account.</p>
                    
                    <div class="d-flex flex-column flex-sm-row justify-content-center gap-3">
                        <a asp-controller="Home" asp-action="Profile" class="btn btn-outline-primary">
                            <i class="bi bi-person me-2"></i>View Profile
                        </a>
                        <a asp-controller="Home" asp-action="Timeline" class="btn btn-outline-primary">
                            <i class="bi bi-list-ul me-2"></i>View Timeline
                        </a>
                        <a asp-controller="Home" asp-action="CreatePost" class="btn btn-primary">
                            <i class="bi bi-plus-square me-2"></i>Create Post
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<div class="row mt-5">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-code-square me-2"></i>
                    About This Sample
                </h5>
                <p class="card-text">
                    This sample demonstrates OAuth 2.0 integration with Bluesky using FishyFlip.AspNetCore. 
                    It shows how to implement secure authentication flows without storing user passwords, 
                    manage user sessions, and interact with the Bluesky API.
                </p>
                <div class="row">
                    <div class="col-md-6">
                        <h6>Key Features:</h6>
                        <ul class="list-unstyled">
                            <li><i class="bi bi-check text-success me-2"></i>OAuth 2.0 with PKCE</li>
                            <li><i class="bi bi-check text-success me-2"></i>Secure session management</li>
                            <li><i class="bi bi-check text-success me-2"></i>Automatic token refresh</li>
                            <li><i class="bi bi-check text-success me-2"></i>Multi-tenant support</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Developer Resources:</h6>
                        <ul class="list-unstyled">
                            <li><a href="https://github.com/drasticactions/FishyFlip" target="_blank" class="text-decoration-none">
                                <i class="bi bi-github me-2"></i>FishyFlip on GitHub
                            </a></li>
                            <li><a href="https://atproto.com/" target="_blank" class="text-decoration-none">
                                <i class="bi bi-book me-2"></i>AT Protocol Docs
                            </a></li>
                            <li><a href="https://bsky.social/about/blog/7-05-2023-developer-guidelines" target="_blank" class="text-decoration-none">
                                <i class="bi bi-lightbulb me-2"></i>Bluesky Dev Guidelines
                            </a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>